{% macro alert(tipo='info', mensagem='Tudo certo!') -%}
<div class="alert alert-{{ tipo }} my-2" role="alert">
  {{ mensagem }}
</div>
{%- endmacro %}

{% macro card_operacao(par='BTC/USDT', preco='-', direcao='NEUTRO', status='aguardando', extra=None) -%}
<div class="card h-100">
  <div class="card-body">
    <h5 class="card-title">{{ par }}</h5>
    <p class="card-text mb-1"><strong>Preço:</strong> {{ preco }}</p>
    <p class="card-text mb-1"><strong>Direção:</strong> {{ direcao }}</p>
    <p class="card-text"><strong>Status:</strong> {{ status }}</p>
    {% if extra %}<div class="small text-muted">{{ extra }}</div>{% endif %}
  </div>
  <div class="card-footer bg-transparent border-0">
    <button class="btn btn-sm btn-primary">Entrar</button>
    <button class="btn btn-sm btn-outline-warning">Stop</button>
    <button class="btn btn-sm btn-outline-success">Alvo</button>
  </div>
</div>
{%- endmacro %}

{% macro tabela_operacoes(ops=[]) -%}
<table class="table table-striped table-sm align-middle">
  <thead>
    <tr>
      <th>#</th><th>Par</th><th>Tipo</th><th>Preço</th><th>Qtd</th><th>Status</th><th>Atualizado</th>
    </tr>
  </thead>
  <tbody>
  {% for o in ops %}
    <tr>
      <td>{{ loop.index }}</td>
      <td>{{ o.par }}</td>
      <td>{{ o.tipo }}</td>
      <td>{{ o.preco }}</td>
      <td>{{ o.qtd }}</td>
      <td>{{ o.status }}</td>
      <td>{{ o.atualizado_em }}</td>
    </tr>
  {% else %}
    <tr><td colspan="7" class="text-center text-muted">Sem operações.</td></tr>
  {% endfor %}
  </tbody>
</table>
{%- endmacro %}

{% macro paginacao(pagina=1, total_paginas=1, base_url='#') -%}
<nav aria-label="Navegação de páginas">
  <ul class="pagination pagination-sm">
    <li class="page-item {{ 'disabled' if pagina<=1 else '' }}">
      <a class="page-link" href="{{ base_url }}?page={{ pagina-1 }}" tabindex="-1">Anterior</a>
    </li>
    {% for p in range(1, total_paginas+1) %}
      <li class="page-item {{ 'active' if p==pagina else '' }}"><a class="page-link" href="{{ base_url }}?page={{ p }}">{{ p }}</a></li>
    {% endfor %}
    <li class="page-item {{ 'disabled' if pagina>=total_paginas else '' }}">
      <a class="page-link" href="{{ base_url }}?page={{ pagina+1 }}">Próximo</a>
    </li>
  </ul>
</nav>
{%- endmacro %}

{% macro modal(id='confirmarModal', titulo='Confirmar', corpo='Deseja prosseguir?', confirmar_label='Confirmar') -%}
<div class="modal" id="{{ id }}" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{ titulo }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      <div class="modal-body"><p>{{ corpo }}</p></div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary">{{ confirmar_label }}</button>
      </div>
    </div>
  </div>
</div>
{%- endmacro %}

{% macro filtro_periodo(action='#', inicio='', fim='') -%}
<form class="row g-2 align-items-end" method="get" action="{{ action }}">
  <div class="col-auto">
    <label class="form-label">Início</label>
    <input type="date" class="form-control" name="inicio" value="{{ inicio }}">
  </div>
  <div class="col-auto">
    <label class="form-label">Fim</label>
    <input type="date" class="form-control" name="fim" value="{{ fim }}">
  </div>
  <div class="col-auto">
    <button class="btn btn-primary">Filtrar</button>
  </div>
</form>
{%- endmacro %}

{% macro toast(titulo='Aviso', corpo='Ação concluída.') -%}
<div class="toast show align-items-center" role="alert" aria-live="assertive" aria-atomic="true">
  <div class="d-flex">
    <div class="toast-body"><strong>{{ titulo }}:</strong> {{ corpo }}</div>
    <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Fechar"></button>
  </div>
</div>
{%- endmacro %}