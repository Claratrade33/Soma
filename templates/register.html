{% extends 'base.html' %}
{% block content %}
<h2>Registrar</h2>
<form onsubmit="event.preventDefault(); registrar();">
  <input id="username" placeholder="Usuário"><br>
  <input id="email" placeholder="Email"><br>
  <input id="password" type="password" placeholder="Senha"><br>
  <button type="submit">Criar</button>
</form>
<script>
async function registrar(){
  const data={
    username:document.getElementById('username').value,
    email:document.getElementById('email').value,
    password:document.getElementById('password').value
  };
  const resp=await fetch('/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
  const r=await resp.json();
  if(resp.status===201){alert('Usuário criado!');window.location='/login';}
  else{alert(r.msg||'Erro no cadastro');}
}
</script>
{% endblock %}
