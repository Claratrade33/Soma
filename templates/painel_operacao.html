{% extends "base.html" %}
{% block title %}ClaraVerse â€¢ Painel Real{% endblock %}

{% block content %}
<div class="painel-operacao">
  <div class="topo-painel">
    <h2>ğŸ“Š Painel de OperaÃ§Ãµes</h2>
    <p>ğŸ’° Saldo Real (USDT): <strong style="color:#00ffcc;">{{ saldo_binance }}</strong></p>
    <p>ğŸ” Conta: {{ user.email }}</p>
  </div>

  <div class="sinais-ia">
    <h3>ğŸ”® Sinais da IA Clarinha</h3>
    <p>ğŸ“ˆ Sinal CÃ³smico: <strong>{{ analise.cosmic_signal }}</strong></p>
    <p>ğŸ“Š ConfianÃ§a: {{ analise.confidence }} | Risco: {{ analise.risk }}</p>
    <p>ğŸ’¬ Sentimento: {{ previsao.sentiment }} | Score: {{ previsao.score }}</p>
  </div>

  <div class="acoes-operacao">
    <form method="post" action="{{ url_for('executar_operacao') }}">
      <label for="quantidade">Quantidade (USDT):</label>
      <input type="number" step="0.01" name="quantidade" id="quantidade" required>

      <label for="lado">OperaÃ§Ã£o:</label>
      <select name="lado" id="lado" required>
        <option value="BUY">ğŸŸ¢ Comprar</option>
        <option value="SELL">ğŸ”´ Vender</option>
      </select>

      <button type="submit">ğŸš€ Executar Ordem</button>
    </form>
  </div>

  <div class="ultimas-operacoes">
    <h3>ğŸ“œ Ãšltimas OperaÃ§Ãµes</h3>
    {% if trades %}
      <table>
        <thead>
          <tr>
            <th>ğŸª™ Par</th><th>ğŸ§­ Lado</th><th>ğŸ’µ Qtd</th>
            <th>ğŸ’¹ Entrada</th><th>ğŸ’° SaÃ­da</th><th>ğŸ“ˆ Resultado</th>
          </tr>
        </thead>
        <tbody>
          {% for trade in trades %}
          <tr>
            <td>{{ trade.symbol }}</td>
            <td>{{ trade.side }}</td>
            <td>{{ trade.quantity }}</td>
            <td>{{ trade.entry_price }}</td>
            <td>{{ trade.exit_price or '-' }}</td>
            <td>{{ trade.profit_loss or '-' }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>Sem operaÃ§Ãµes registradas ainda.</p>
    {% endif %}
  </div>
</div>
{% endblock %}