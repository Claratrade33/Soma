{% extends "base.html" %}
{% block title %}ClaraVerse • Painel Real{% endblock %}

{% block content %}
<div class="painel-operacao">
  <div class="topo-painel">
    <h2>📊 Painel de Operações</h2>
    <p>💰 Saldo Real (USDT): <strong style="color:#00ffcc;">{{ saldo_binance }}</strong></p>
    <p>🔐 Conta: {{ user.email }}</p>
  </div>

  <div class="sinais-ia">
    <h3>🔮 Sinais da IA Clarinha</h3>
    <p>📈 Sinal Cósmico: <strong>{{ analise.cosmic_signal }}</strong></p>
    <p>📊 Confiança: {{ analise.confidence }} | Risco: {{ analise.risk }}</p>
    <p>💬 Sentimento: {{ previsao.sentiment }} | Score: {{ previsao.score }}</p>
  </div>

  <div class="acoes-operacao">
    <form method="post" action="{{ url_for('executar_operacao') }}">
      <label for="quantidade">Quantidade (USDT):</label>
      <input type="number" step="0.01" name="quantidade" id="quantidade" required>

      <label for="lado">Operação:</label>
      <select name="lado" id="lado" required>
        <option value="BUY">🟢 Comprar</option>
        <option value="SELL">🔴 Vender</option>
      </select>

      <button type="submit">🚀 Executar Ordem</button>
    </form>
  </div>

  <div class="ultimas-operacoes">
    <h3>📜 Últimas Operações</h3>
    {% if trades %}
      <table>
        <thead>
          <tr>
            <th>🪙 Par</th><th>🧭 Lado</th><th>💵 Qtd</th>
            <th>💹 Entrada</th><th>💰 Saída</th><th>📈 Resultado</th>
          </tr>
        </thead>
        <tbody>
          {% for trade in trades %}
          <tr>
            <td>{{ trade.symbol }}</td>
            <td>{{ trade.side }}</td>
            <td>{{ trade.quantity }}</td>
            <td>{{ trade.entry_price }}</td>
            <td>{{ trade.exit_price or '-' }}</td>
            <td>{{ trade.profit_loss or '-' }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>Sem operações registradas ainda.</p>
    {% endif %}
  </div>
</div>
{% endblock %}