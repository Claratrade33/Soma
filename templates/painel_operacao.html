<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>ClaraVerse Finance üåô | Painel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://s3.tradingview.com/tv.js"></script>
</head>
<body>
    <header>
        <nav>
            <span class="logo">üåô ClaraVerse Finance</span>
            <ul>
                <li><a href="{{ url_for('index') }}">In√≠cio</a></li>
                <li><a href="{{ url_for('painel_operacao') }}">Painel</a></li>
                <li><a href="{{ url_for('logout') }}">Sair</a></li>
            </ul>
        </nav>
    </header>

    {% if error_msg %}
    <div class="alert danger">{{ error_msg }}</div>
    {% endif %}

    <div class="painel-container">
        <section class="grafico-section">
            <div id="tv-chart" style="width:100%;height:340px;background:#18182c;border-radius:24px;margin-bottom:12px;"></div>
            <script type="text/javascript">
                new TradingView.widget({
                  "container_id": "tv-chart",
                  "width": "100%",
                  "height": 340,
                  "symbol": "BINANCE:BTCUSDT",
                  "interval": "15",
                  "timezone": "America/Sao_Paulo",
                  "theme": "dark",
                  "style": "1",
                  "locale": "br",
                  "toolbar_bg": "#16112b",
                  "enable_publishing": false,
                  "allow_symbol_change": true,
                  "hide_top_toolbar": false,
                  "withdateranges": true,
                  "details": true,
                  "studies": [
                    "STD;Moving Average",
                    "STD;RSI"
                  ]
                });
            </script>
            <div class="info-row">
                <span>Par: <b>BTC/USDT</b></span>
                <span style="margin-left:16px;">Mercado em tempo real</span>
            </div>
        </section>

        <aside class="carteira-section">
            <h2 class="carteira-title">Carteira</h2>
            <div class="carteira-saldo">
                <div><strong>BTC Spot:</strong> <span id="saldo-btc">{{ saldo_btc }}</span></div>
                <div><strong>USDT Spot:</strong> <span id="saldo-usdt">{{ saldo_usdt }}</span></div>
                <div><strong>USDT Futuros:</strong> <span id="saldo-futures-usdt">{{ saldo_futures_usdt }}</span></div>
            </div>

            <input type="number" step="any" min="0" id="qtd_input" placeholder="Quantidade (ex: 0.001)">
            <button class="btn buy" onclick="confirmarOrdem('buy')">üü¢ Comprar</button>
            <button class="btn sell" onclick="confirmarOrdem('sell')">üî¥ Vender</button>
            <button class="btn suggest" onclick="confirmarOrdem('suggest')">‚ú® Sugest√£o IA</button>
            <button class="btn auto" onclick="confirmarOrdem('auto')">‚öôÔ∏è Autom√°tico</button>

            <h3 class="historico-title">Hist√≥rico de Ordens</h3>
            <table id="ordens-table">
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Ativo</th>
                        <th>Qtd.</th>
                        <th>Pre√ßo</th>
                        <th>Hora</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </aside>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>