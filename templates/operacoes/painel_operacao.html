{% extends "base.html" %}
{% from 'componentes/macros.html' import alert, card_operacao, tabela_operacoes, paginacao, modal, filtro_periodo, toast %}
{% block title %}Painel Automático — Operações{% endblock %}
{% block content %}
  <h2 class="mb-3">Painel Automático</h2>
  {{ alert('info', status_msg|default('Configure e inicie o robô quando estiver pronta.')) }}

  <section class="mb-4">
    <h5>Status do Robô</h5>
    <ul class="mb-2">
      <li>Rodando: <strong>{{ robo_status|default('desconhecido') }}</strong></li>
      <li>Par: <strong>{{ par|default('BTC/USDT') }}</strong></li>
      <li>Timeframe: <strong>{{ timeframe|default('15m') }}</strong></li>
      <li>Estratégia: <strong>{{ estrategia|default('Padrão') }}</strong></li>
    </ul>
    <div class="d-flex gap-2">
      <button class="btn btn-primary">Iniciar</button>
      <button class="btn btn-warning">Pausar</button>
      <button class="btn btn-danger">Parar</button>
    </div>
  </section>

  <section class="mb-4">
    <h5>Filtro por Período</h5>
    {{ filtro_periodo(url_for('operacoes_automatico.painel'), inicio, fim) }}
  </section>

  <section class="mb-4">
    <h5>Operações Recentes</h5>
    {% set _ops = ops if ops is defined else [] %}
    {% include 'componentes/cards_operacao.html' with context %}
  </section>

  <section class="mb-3">
    <h5>Tabela de Operações</h5>
    {{ tabela_operacoes(_ops) }}
  </section>

  <div class="mb-4">
    {{ paginacao(pagina|default(1), total_paginas|default(1), request.path) }}
  </div>

  {{ modal('confirmarAcaoAuto', 'Confirmar ação', 'Deseja realmente executar esta ação?', 'Confirmar') }}
  {{ toast(toast_titulo|default('Aviso'), toast_msg|default('Operação executada.')) }}
{% endblock %}