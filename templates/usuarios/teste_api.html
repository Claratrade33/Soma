{% extends "base.html" %}
{% block title %}Ordens / Teste de Conexão{% endblock %}
{% block content %}
<h3>Teste de Conexão — Binance</h3>

{% if st.conectado %}
  <div class="alert alert-success">Conectado! <small>(API: {{ st.api_base }})</small></div>
{% else %}
  <div class="alert alert-danger">Não conectado. Verifique suas credenciais.</div>
{% endif %}

<p><b>{{ st.symbol }}</b> preço: <b>{{ st.price }}</b> • USDT livre: <b>{{ st.usdt_free }}</b></p>

<hr>
<h5>Enviar Ordem de Mercado</h5>
<form method="post" class="row g-3">
  <div class="col-md-3">
    <label class="form-label">Símbolo</label>
    <input name="symbol" class="form-control" value="{{ st.symbol }}">
  </div>
  <div class="col-md-3">
    <label class="form-label">Side</label>
    <select name="side" class="form-select">
      <option value="BUY">BUY</option>
      <option value="SELL">SELL</option>
    </select>
  </div>
  <div class="col-md-3">
    <label class="form-label">Qtd</label>
    <input name="qty" class="form-control" value="0.001">
  </div>
  <div class="col-md-3 d-flex align-items-end">
    <button class="btn btn-warning w-100">Enviar ordem</button>
  </div>
</form>

{% if order_result %}
  <div class="mt-3">
    <pre class="bg-light p-3 rounded">{{ order_result | tojson(indent=2) }}</pre>
  </div>
{% endif %}
{% endblock %}