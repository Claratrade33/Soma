{% extends "base.html" %}
{% block title %}Configurar Corretora{% endblock %}
{% block content %}
<h3>Configurar Corretora (Binance)</h3>

{% if msg_ok %}
  <div class="alert alert-success">{{ msg_ok }}</div>
{% endif %}

<form method="post" class="mt-3">
  <div class="mb-3">
    <label class="form-label">API Key</label>
    <input name="api_key" type="text" class="form-control" placeholder="cole sua API Key" value="{{ existing.api_key if existing else '' }}" required>
  </div>
  <div class="mb-3">
    <label class="form-label">API Secret</label>
    <input name="api_secret" type="password" class="form-control" placeholder="cole sua API Secret" value="{{ existing.api_secret if existing else '' }}" required>
  </div>
  <div class="form-check form-switch mb-3">
    <input class="form-check-input" type="checkbox" name="testnet" id="testnet" {% if existing and existing.testnet %}checked{% endif %}>
    <label class="form-check-label" for="testnet">Usar Testnet</label>
  </div>
  <button class="btn btn-primary">Salvar credenciais</button>
  <a class="btn btn-outline-secondary" href="{{ url_for('usuario_api.testar_api') }}">Ir para Teste/Ordens</a>
</form>

<p class="text-muted mt-3">
  As chaves ficam criptografadas com <code>FERNET_KEY</code>.
</p>
{% endblock %}